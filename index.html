<!DOCTYPE html>
<html lang="en" data-theme="forest">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nextgen Udaan - Join</title>
    <link rel="icon" type="image/png" href="nextlogo.png">
    
    <!-- Tailwind CSS & DaisyUI -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="style.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'green-custom': '#4ade80',
                        'blue-custom': '#1e3a8a'
                    }
                }
            }
        }
    </script>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <!-- Immersive Background -->
    <div class="bg-immersive"></div>
    <div class="bg-overlay"></div>
    
    <!-- Main Content -->
    <main class="w-full max-w-3xl z-10">
        <div class="card bg-base-100 shadow-xl border border-base-300">
            <div class="card-body p-6 md:p-10">
                <div class="text-center mb-8">
                    <h1 class="text-3xl md:text-4xl font-bold text-primary mb-2">Join NextGen Udaan</h1>
                    <p class="text-base-content/70 text-lg">Request Your Free Onboarding Call</p>
                </div>

                <form id="joinForm" class="space-y-6" onsubmit="submitJoinForm(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Name -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Full Name</span>
                            </label>
                            <input type="text" id="name" placeholder="John Doe"
                                class="input input-bordered w-full focus:input-primary"
                                required />
                        </div>

                        <!-- Phone -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Phone Number</span>
                            </label>
                            <input type="tel" id="phone" placeholder="+91 98765 43210"
                                class="input input-bordered w-full focus:input-primary"
                                required />
                        </div>

                        <!-- Email -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Email Address</span>
                            </label>
                            <input type="email" id="email" placeholder="john@example.com"
                                class="input input-bordered w-full focus:input-primary"
                                required />
                        </div>

                        <!-- Age -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Age</span>
                            </label>
                            <input type="number" id="age" placeholder="25" min="18" max="80"
                                class="input input-bordered w-full focus:input-primary"
                                required />
                        </div>

                        <!-- Instagram ID -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Instagram ID</span>
                            </label>
                            <input type="text" id="instagramId" placeholder="@username"
                                class="input input-bordered w-full focus:input-primary" />
                        </div>

                        <!-- Location -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Location</span>
                            </label>
                            <input type="text" id="location" placeholder="City, State"
                                class="input input-bordered w-full focus:input-primary"
                                required />
                        </div>

                        <!-- Lead Source -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">How did you hear about us?</span>
                            </label>
                            <select id="leadSource"
                                class="select select-bordered w-full focus:select-primary"
                                required onchange="toggleOtherField()">
                                <option value="" disabled selected>Select an option</option>
                                <option value="Instagram">Instagram</option>
                                <option value="WhatsApp">WhatsApp</option>
                                <option value="Referral">Referral</option>
                                <option value="Event">Event</option>
                                <option value="others">Others - Please Specify</option>
                            </select>
                        </div>

                        <!-- What They Do -->
                        <div class="form-control w-full">
                            <label class="label">
                                <span class="label-text font-medium">Current Occupation</span>
                            </label>
                            <input type="text" id="whatTheyDo" placeholder="Student, Job, Business..."
                                class="input input-bordered w-full focus:input-primary" />
                        </div>
                    </div>

                    <!-- Lead Source Other (Hidden by default) -->
                    <div id="otherFieldContainer" class="form-control w-full hidden transition-all duration-300">
                        <label class="label">
                            <span class="label-text font-medium">Please Specify</span>
                        </label>
                        <input type="text" id="leadSourceOther" placeholder="Tell us where you heard about us"
                            class="input input-bordered w-full focus:input-primary" />
                    </div>

                    <!-- Why Want to Join -->
                    <div class="form-control w-full">
                        <label class="label">
                            <span class="label-text font-medium">Why do you want to join NextGen Udaan?</span>
                        </label>
                        <textarea id="whyWantToJoin" placeholder="Share your motivation..." rows="3"
                            class="textarea textarea-bordered h-24 w-full focus:textarea-primary"
                            required></textarea>
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-4">
                        <button type="submit" id="submitBtn"
                            class="btn btn-primary w-full text-lg shadow-lg hover:scale-[1.02] transition-transform">
                            <span id="submitText">Submit Request</span>
                            <span id="loadingText" class="hidden loading loading-spinner loading-md"></span>
                            <span id="loadingLabel" class="hidden ml-2">Submitting...</span>
                        </button>
                    </div>

                    <!-- Form Message -->
                    <div class="text-center min-h-[24px]">
                        <p id="formMessage" class="text-sm font-medium transition-all duration-300 opacity-0"></p>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 px-4">
        <p class="text-base-content/50 text-sm">&copy; 2026 NextGen Udaan. All rights reserved.</p>
    </footer>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-analytics.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyACCpl5f7g34Fs0eMxUguBuGE80SuKZCIA",
            authDomain: "hrms-326ad.firebaseapp.com",
            projectId: "hrms-326ad",
            storageBucket: "hrms-326ad.firebasestorage.app",
            messagingSenderId: "813107687048",
            appId: "1:813107687048:web:2d3c2fff54a65285ba793d",
            measurementId: "G-HXGFCBV64Q"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        window.submitJoinForm = async function (event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const instagramId = document.getElementById('instagramId').value;
            const location = document.getElementById('location').value;
            const leadSource = document.getElementById('leadSource').value;
            const leadSourceOther = document.getElementById('leadSourceOther').value;
            const whatTheyDo = document.getElementById('whatTheyDo').value;
            const whyWantToJoin = document.getElementById('whyWantToJoin').value;
            const formMessage = document.getElementById('formMessage');

            let finalLeadSource = leadSource;
            if (leadSource === 'others') {
                finalLeadSource = `Others: ${leadSourceOther}`;
            }

            // Show loading state
            showLoading(true);

            try {
                await addDoc(collection(db, 'joinRequests'), {
                    name: name,
                    phone: phone,
                    email: email,
                    age: parseInt(document.getElementById('age').value),
                    instagramId: instagramId,
                    location: location,
                    leadSource: finalLeadSource,
                    whatTheyDo: whatTheyDo,
                    whyWantToJoin: whyWantToJoin,
                    timestamp: serverTimestamp()
                });

                showLoading(false);
                showMessage('üéâ Your request has been submitted successfully! We\'ll get back to you soon.', true);
                document.getElementById('joinForm').reset();
                document.getElementById('otherFieldContainer').classList.add('hidden');
                document.getElementById('leadSourceOther').required = false;

            } catch (error) {
                console.error("Error writing document: ", error);
                showLoading(false);
                showMessage('‚ùå Error submitting your request. Please try again.', false);
            }
        };
    </script>

    <script>
        function toggleOtherField() {
            const leadSource = document.getElementById('leadSource').value;
            const otherContainer = document.getElementById('otherFieldContainer');
            const otherInput = document.getElementById('leadSourceOther');

            if (leadSource === 'others') {
                otherContainer.classList.remove('hidden');
                otherInput.required = true;
            } else {
                otherContainer.classList.add('hidden');
                otherInput.required = false;
                otherInput.value = '';
            }
        }

        function showLoading(show) {
            const submitText = document.getElementById('submitText');
            const loadingText = document.getElementById('loadingText');
            const loadingLabel = document.getElementById('loadingLabel');
            const submitBtn = document.getElementById('submitBtn');

            if (show) {
                submitText.classList.add('hidden');
                loadingText.classList.remove('hidden');
                loadingLabel.classList.remove('hidden');
                submitBtn.disabled = true;
            } else {
                submitText.classList.remove('hidden');
                loadingText.classList.add('hidden');
                loadingLabel.classList.add('hidden');
                submitBtn.disabled = false;
            }
        }

        function showMessage(message, isSuccess) {
            const formMessage = document.getElementById('formMessage');
            formMessage.textContent = message;
            formMessage.classList.remove('text-success', 'text-error', 'opacity-0');
            formMessage.classList.add(isSuccess ? 'text-success' : 'text-error', 'opacity-100');

            // Auto-hide message after 5 seconds
            setTimeout(() => {
                formMessage.classList.add('opacity-0');
                setTimeout(() => {
                    if (formMessage.classList.contains('opacity-0')) {
                        formMessage.textContent = '';
                    }
                }, 300);
            }, 5000);
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function () {
            // Add entrance animation
            const card = document.querySelector('.card');
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'all 0.6s ease-out';

            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
        });
    </script>
</body>

</html>